user
    cp 0
    jp nz,usr1
    ; USER 0 command
    ; Get the draw value from the Q variable
    ld a,(varq)
    ld hl,0x7000
    ld de,0x7001
    ; Counter for lines downscreen
    ld bc,0x20
disloop    
    push bc
    ld a,(varq)
    ld bc,0x01f
    ld (hl),a
    ldir
    ld bc,0xffff
delayit
    dec bc
    ld a,b
    or c
    djnz delayit
    ld bc,0xffff
delayit2
    dec bc
    ld a,b
    or c
    djnz delayit2
    ld bc,0xffff
delayit3
    dec bc
    ld a,b
    or c
    djnz delayit3    
    ld bc,0x20
    add hl,bc
    push hl
    push de
    pop hl
    add hl,bc
    push hl
    pop de
    pop hl
    pop bc
    dec bc
    inc hl
    inc de
    ld a,b
    or c
    jr nz,disloop
    ld a,(varq)
    ld hl,0x7020
    ld de,0x7021
    ; Counter for lines downscreen
    ld bc,0x20
disloop2    
    push bc
    ld a,(varq)
    ld bc,0x01f
    ld (hl),a
    ldir
    ld bc,0xffff
delayit4
    dec bc
    ld a,b
    or c
    djnz delayit4
    ld bc,0xffff
delayit5
    dec bc
    ld a,b
    or c
    djnz delayit5
    ld bc,0xffff
delayit6
    dec bc
    ld a,b
    or c
    djnz delayit6   
    ld bc,0x20
    add hl,bc
    push hl
    push de
    pop hl
    add hl,bc
    push hl
    pop de
    pop hl
    pop bc
    dec bc
    inc hl
    inc de
    ld a,b
    or c
    jr nz,disloop2    

    ld a,0x00
    ld hl,0x7000
    ld de,0x7001
    ; Counter for lines downscreen
    ld bc,0x20
disloop3    
    push bc
    ld a,0x00
    ld bc,0x01f
    ld (hl),a
    ldir
    ld bc,0xffff
delayit7
    dec bc
    ld a,b
    or c
    djnz delayit7
    ld bc,0xffff
delayit8
    dec bc
    ld a,b
    or c
    djnz delayit8
    ld bc,0xffff
delayit9
    dec bc
    ld a,b
    or c
    djnz delayit9    
    ld bc,0x20
    add hl,bc
    push hl
    push de
    pop hl
    add hl,bc
    push hl
    pop de
    pop hl
    pop bc
    dec bc
    inc hl
    inc de
    ld a,b
    or c
    jr nz,disloop3
    ld a,0
    ld hl,0x7020
    ld de,0x7021
    ; Counter for lines downscreen
    ld bc,0x20
disloop4   
    push bc
    ld a,0x00
    ld bc,0x01f
    ld (hl),a
    ldir
    ld bc,0xffff
delayit10
    dec bc
    ld a,b
    or c
    djnz delayit10
    ld bc,0xffff
delayit11
    dec bc
    ld a,b
    or c
    djnz delayit11
    ld bc,0xffff
delayit12
    dec bc
    ld a,b
    or c
    djnz delayit12  
    ld bc,0x20
    add hl,bc
    push hl
    push de
    pop hl
    add hl,bc
    push hl
    pop de
    pop hl
    pop bc
    dec bc
    inc hl
    inc de
    ld a,b
    or c
    jr nz,disloop4    
    ret     
    ; save value to display
    
usr1
    cp 1
    jr nz, usr2
    ld hl,title
    ld de,7000h
    ld bc,0600h
    ldir
    ret
usr2
    cp 2
    jr nz,usr3
    ld a,(varq)
	ret
usr3
	cp 3
	jr nz,usr4
	ret
usr4
        ret

title
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x01, 0x55, 0x40, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x00, 0x54, 0x00, 0x00, 0x00, 0x00, 0x55, 0x55, 0x50, 0x00, 0x00
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x15, 0x55, 0x50
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x5A, 0x00
  defb 0x00, 0x00, 0x15, 0x55, 0x55, 0x68, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x00, 0x00, 0x00, 0x01, 0x59, 0x59, 0x58, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x05, 0x68, 0x00, 0x00, 0x00, 0x56, 0x95
  defb 0xAA, 0xA0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x05, 0x65, 0x59, 0x58, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x05, 0xA0, 0x00, 0x00, 0x01, 0x5A, 0x55, 0x80, 0x00, 0x00, 0x00
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x05, 0x55, 0x65, 0x68
  defb 0x05, 0x51, 0x55, 0x54, 0x05, 0x55, 0x50, 0x15, 0x45, 0x52, 0x81, 0x55
  defb 0x40, 0x05, 0x69, 0x56, 0x80, 0x55, 0x50, 0x15, 0x40, 0x05, 0x55, 0x05
  defb 0x55, 0x40, 0x05, 0x50, 0x15, 0x95, 0x55, 0xA0, 0x56, 0x59, 0x55, 0x56
  defb 0x05, 0x55, 0x58, 0x55, 0xA5, 0x68, 0x05, 0x69, 0x50, 0x05, 0x61, 0x55
  defb 0x41, 0x5A, 0x54, 0x56, 0x51, 0x55, 0x55, 0x85, 0x65, 0x60, 0x56, 0x58
  defb 0x56, 0x55, 0x55, 0x81, 0x59, 0x55, 0x59, 0x56, 0x15, 0x65, 0x58, 0x55
  defb 0x95, 0x60, 0x15, 0x65, 0x58, 0x15, 0xA5, 0x55, 0x65, 0x59, 0x55, 0x59
  defb 0x55, 0x5A, 0x56, 0x95, 0x65, 0x51, 0x59, 0x58, 0x2A, 0x56, 0x95, 0x45
  defb 0x69, 0x65, 0x69, 0x56, 0x15, 0xA5, 0x59, 0x56, 0x95, 0xA0, 0x15, 0x62
  defb 0xA8, 0x0A, 0x85, 0x6A, 0xA5, 0x58, 0xA5, 0x59, 0x55, 0x69, 0x56, 0x15
  defb 0xA5, 0x65, 0x69, 0x68, 0x01, 0x56, 0x15, 0x55, 0x55, 0x95, 0x65, 0x5A
  defb 0x55, 0x95, 0x69, 0x5A, 0x55, 0x80, 0x05, 0x50, 0x00, 0x00, 0x15, 0x60
  defb 0x01, 0x54, 0x15, 0x68, 0x55, 0xA5, 0x5A, 0x55, 0x95, 0x55, 0x55, 0xA0
  defb 0x01, 0x5A, 0x15, 0x55, 0x56, 0x95, 0xA5, 0x58, 0x56, 0x95, 0x65, 0x58
  defb 0x56, 0x80, 0x05, 0x54, 0x00, 0x00, 0x15, 0xA0, 0x01, 0x55, 0x15, 0xA0
  defb 0x55, 0x85, 0x59, 0x56, 0x95, 0x55, 0x56, 0x80, 0x05, 0x58, 0x55, 0x95
  defb 0xAA, 0x55, 0x95, 0x69, 0x56, 0x55, 0xA5, 0x69, 0x56, 0x01, 0x51, 0x56
  defb 0x00, 0x00, 0x55, 0x80, 0x54, 0x55, 0x95, 0x81, 0x56, 0x95, 0x69, 0x56
  defb 0x55, 0x95, 0xAA, 0x50, 0x05, 0x69, 0x55, 0x55, 0x81, 0x56, 0x95, 0x65
  defb 0x5A, 0x55, 0x95, 0x65, 0x5A, 0x05, 0x69, 0x56, 0x00, 0x00, 0x56, 0x81
  defb 0x5A, 0x55, 0x55, 0x81, 0x56, 0x55, 0xA5, 0x5A, 0x56, 0x55, 0x81, 0x68
  defb 0x15, 0x65, 0x5A, 0x55, 0x95, 0x56, 0x15, 0x55, 0x58, 0x55, 0x55, 0x95
  defb 0x58, 0x05, 0xA5, 0x5A, 0x00, 0x01, 0x55, 0x55, 0x69, 0x56, 0x55, 0x95
  defb 0x55, 0x55, 0x55, 0x55, 0x5A, 0x55, 0x95, 0xA0, 0x55, 0x55, 0xA8, 0x15
  defb 0x55, 0x5A, 0x15, 0x55, 0x68, 0x55, 0xA5, 0x55, 0x68, 0x01, 0x55, 0xA8
  defb 0x00, 0x05, 0x55, 0x5A, 0x55, 0x6A, 0x15, 0x5A, 0x55, 0x95, 0x55, 0x55
  defb 0x68, 0x15, 0x5A, 0x80, 0x2A, 0xAA, 0x80, 0x0A, 0xAA, 0xA8, 0x0A, 0xAA
  defb 0xA0, 0x2A, 0x82, 0x95, 0xA0, 0x00, 0xAA, 0x80, 0x00, 0x02, 0xAA, 0xA8
  defb 0x2A, 0xA0, 0x0A, 0xA8, 0x2A, 0x8A, 0x95, 0xAA, 0xA0, 0x0A, 0xA8, 0x00
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x56
  defb 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x00, 0x55, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x14, 0x56, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x56, 0x80
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x01, 0x55, 0x6A, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x56, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x20, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xAA, 0xA0
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x05, 0x5A, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xA0, 0x98, 0x00
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0xA8, 0x00
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x98, 0x96, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0xFE, 0xD6, 0x56, 0xFF, 0xFF, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xC2, 0xF5, 0x58, 0x00
  defb 0x00, 0x30, 0x00, 0x05, 0x00, 0x00, 0x00, 0x00, 0x55, 0x40, 0x00, 0x00
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x55, 0x40, 0x00, 0x00, 0x05, 0x00
  defb 0x50, 0x00, 0x00, 0x00, 0xC0, 0xB5, 0x56, 0x00, 0x00, 0x30, 0x00, 0x17
  defb 0xC0, 0x00, 0x00, 0x05, 0x35, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x01, 0x3F, 0x50, 0x00, 0x00, 0x17, 0xC1, 0x7C, 0x00, 0x00, 0x00
  defb 0xC0, 0x25, 0x69, 0xA0, 0x00, 0x30, 0x00, 0x17, 0x00, 0x00, 0x00, 0x17
  defb 0xD7, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0xD4, 0x14
  defb 0x00, 0x00, 0x1F, 0x05, 0x70, 0x00, 0x00, 0x00, 0xC0, 0x95, 0x96, 0x58
  defb 0x02, 0xB0, 0x00, 0x55, 0x41, 0x41, 0x40, 0x1F, 0x17, 0x05, 0x54, 0x15
  defb 0x40, 0x55, 0x05, 0x14, 0x00, 0x13, 0x5F, 0x17, 0x05, 0x54, 0x5D, 0x45
  defb 0xF1, 0x51, 0x41, 0x40, 0xC0, 0x95, 0xB6, 0xD8, 0x2A, 0xA0, 0x00, 0x5D
  defb 0x75, 0xF5, 0x70, 0x5C, 0x5F, 0x53, 0x5D, 0x5F, 0x71, 0x35, 0xC5, 0x45
  defb 0x00, 0x4D, 0x7C, 0x5F, 0x53, 0x5F, 0x54, 0x57, 0xC4, 0xD5, 0xF5, 0x70
  defb 0xC2, 0x55, 0x96, 0x5A, 0x9A, 0xA0, 0x01, 0x7D, 0x75, 0xC5, 0xF0, 0x3C
  defb 0x5D, 0x7D, 0x7D, 0x7D, 0x74, 0xD5, 0x57, 0xF7, 0xC1, 0x35, 0xF0, 0x5D
  defb 0x7D, 0x7D, 0x7D, 0x17, 0x13, 0x45, 0xC5, 0xF0, 0xC2, 0x55, 0x69, 0xA5
  defb 0x56, 0xB0, 0x01, 0x71, 0x57, 0xD5, 0xC0, 0x01, 0x75, 0xF1, 0x70, 0x50
  defb 0xD7, 0x55, 0xD7, 0x17, 0x00, 0xC5, 0xC1, 0x75, 0xF1, 0x71, 0x74, 0x5F
  defb 0x5D, 0x17, 0xD5, 0xC0, 0xC2, 0x55, 0x55, 0x55, 0x55, 0xB0, 0x05, 0xF5
  defb 0xD7, 0x17, 0xC0, 0x01, 0x55, 0xC5, 0xF4, 0x54, 0x5F, 0x17, 0x5F, 0x5F
  defb 0x00, 0x17, 0xC5, 0x55, 0xC5, 0xF5, 0x53, 0x5D, 0x54, 0xD7, 0x17, 0xC0
  defb 0xC9, 0x55, 0x55, 0x55, 0x55, 0xB0, 0x15, 0xC7, 0x5F, 0x5F, 0x00, 0x05
  defb 0xD7, 0xC5, 0xD7, 0x17, 0x5C, 0x1F, 0x5C, 0x5C, 0x40, 0x17, 0x05, 0xD7
  defb 0xC5, 0xD5, 0x5D, 0x7D, 0x7F, 0x5F, 0x5F, 0x00, 0xC9, 0x55, 0x65, 0x55
  defb 0x56, 0x30, 0x17, 0xD7, 0x5D, 0x5C, 0x00, 0x05, 0xD7, 0x57, 0xDF, 0x57
  defb 0x5C, 0x4D, 0x7D, 0x7D, 0x30, 0x17, 0x57, 0xD7, 0x57, 0xD7, 0x5D, 0x75
  defb 0x71, 0x5D, 0x5C, 0x00, 0xE5, 0x55, 0x5A, 0x95, 0x56, 0x30, 0x55, 0x4F
  defb 0x55, 0x7C, 0x00, 0x17, 0xD5, 0x15, 0x55, 0x7F, 0x55, 0x35, 0x70, 0x54
  defb 0xC0, 0x15, 0x7F, 0x15, 0x15, 0x57, 0x55, 0x51, 0x54, 0x55, 0x7C, 0x00
  defb 0xE5, 0x55, 0x55, 0x6A, 0xA8, 0x30, 0x3F, 0xF0, 0x3D, 0x70, 0x10, 0x5F
  defb 0x0F, 0xCF, 0xFF, 0xF0, 0x3F, 0xC3, 0xF0, 0x3F, 0x00, 0x0F, 0xF0, 0x0F
  defb 0xCF, 0xFF, 0x3F, 0xFC, 0xFF, 0x3D, 0x70, 0x00, 0x95, 0x55, 0x55, 0x68
  defb 0x00, 0x30, 0x00, 0x00, 0x05, 0xF1, 0x5D, 0x7C, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x05, 0xF0, 0x00, 0x55, 0x55, 0x5A, 0x80, 0x00, 0x30, 0x00, 0x00
  defb 0x47, 0xC0, 0x55, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x47, 0xC0, 0x00
  defb 0x55, 0x55, 0x60, 0x00, 0x00, 0x30, 0x00, 0x05, 0x53, 0x00, 0x3F, 0xC0
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x00, 0x00, 0x00, 0x05, 0x53, 0x00, 0x00, 0x55, 0x55, 0x80, 0x00
  defb 0x00, 0x30, 0x00, 0x03, 0xFC, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x03, 0xFC, 0x00, 0x00, 0x55, 0x55, 0x80, 0x00, 0x00, 0x30, 0x00, 0x00
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x55, 0x55, 0xFF, 0xFF, 0xFF, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  defb 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00